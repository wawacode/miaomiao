var miaomiao=angular.module("miaomiao.shop");miaomiao.factory("httpClient",["$http",function(c){var a=function(e,g,f,d){c({method:"GET",url:e+"?"+g}).success(function(j,h,k,i){f(j,h,k,i);}).error(function(j,h,k,i){d(j,h,k,i);});};var b=function(e,g,f,d){c.post(e,g,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).success(function(j,h,k,i){f(j,h,k,i);}).error(function(j,h,k,i){d(j,h,k,i);});};return{getProductList:function(e,f,d){a("shop/category/get","shop_id="+e,f,d);},getMoreProductList:function(e,h,i,g,f,d){a("shop/getitems","shop_id="+e+"&category_id="+h+"&from="+i+"&offset="+g,f,d);},getAddressList:function(e,f,d){a("address","shop_id="+e,f,d);},setDefaultAddress:function(e,g,f,d){b("address/default?shop_id="+e,{address_id:g.id,address:g.address,phone:g.phone},f,d);},addAddress:function(e,g,f,d){b("address/add?shop_id="+e,{address:g.address,phone:g.phone},f,d);},getConfirmCartList:function(f,e,g,d){b("shopCar/confirm?shop_id="+f,{items:JSON.stringify(e)},g,d);},getOrderSave:function(k,i,j,g,f,h,d,l,e){b("order/save?shop_id="+k,{items:JSON.stringify(h),address_id:i,address:j,phone:g,remarks:f,order_id:d},l,e);},getMyOrders:function(e,f,d){a("user/profile","shop_id="+e,f,d);},getSearchResults:function(f,e,g,d){a("search/query","shop_id="+f+"&key="+e,g,d);},getSearchSuggestion:function(f,e,g,d){a("/suggestion/query","shop_id="+f+"&q="+e,g,d);},getShopByGEOLocation:function(f,e,g,d){a("f","lat="+f+"&lng="+e,g,d);},getShopList:function(g,f,e,d){a("shop/shopList","from="+g+"&offset="+f,e,d);},getShopInfo:function(e,f,d){a("shop","shop_id="+e,f,d);},getNearShopList:function(f,e,g,d){a("near","lat="+f+"&lng="+e,g,d);}};}]).factory("GEOLocationService",["$timeout",function(a){return{GEOLocationSupported:function(b){return navigator.geolocation;}};}]).factory("AddressService",["$http","$rootScope","$timeout",function(c,a,b){return{addressChangeEventSwitchDefault:function(d){b(function(){a.$broadcast("MMEVENT_AddressChangeEventSwitchDefault",{item:d});});},onAddressChangeEventSwitchDefault:function(d,e){d.$on("MMEVENT_AddressChangeEventSwitchDefault",function(g,f){e(f);});},addressChangeEventAddNew:function(d){b(function(){a.$broadcast("MMEVENT_AddressChangeEventAddNew",{item:d});});},onAddressChangeEventAddNew:function(d,e){d.$on("MMEVENT_AddressChangeEventAddNew",function(g,f){e(f);});}};}]).factory("OrderService",["$http","$rootScope","$timeout",function(c,a,b){return{orderChangeEventSuccess:function(d){b(function(){a.$broadcast("MMEVENT_OrderChangeEventSuccess",{item:d});});},onOrderChangeEventSuccess:function(d,e){d.$on("MMEVENT_OrderChangeEventSuccess",function(g,f){e(f);});}};}]).factory("MMUtils",["$timeout",function(a){return{isEmptyObject:function(c){if(c==null){return true;}if(c.length>0){return false;}if(c.length===0){return true;}for(var b in c){if(Object.prototype.hasOwnProperty.call(c,b)){return false;}}return true;},isValidTelNumber:function(d){var c=/^(([0\+]\d{2,3}-)?(0\d{2,3})-)?(\d{7,8})(-(\d{3,}))?$/;var b=/^1[3|4|5|6|7|8|9][0-9]{1}[0-9]{8}$/;return c.test(d)||b.test(d);}};}]);