angular.module("miaomiao.shop").controller("LoadingCtrl",function(k,g,i,a,e,b,d,j){k.info={};k.info.getGeolocationTitle="定位中...";k.info.getGeolocationTitleClass="blink_me";k.info.showLocateImg=true;k.info.lastShop=e.get("MMMETA_shop");function h(l){if(l){k.info.getGeolocationTitle="定位成功，正在加载请稍候...";k.info.getGeolocationTitleClass="getGeolocation-title-success";e.set("MMMETA_location_pos_ready",1);e.set("MMMETA_location_pos_data",{lat:l.coords.latitude,lng:l.coords.longitude});a.go("findshop");}else{k.info.getGeolocationTitle="定位失败...";e.set("MMMETA_location_pos_ready",0);a.go("findshop");}}function f(l){k.info.getGeolocationTitleClass="getGeolocation-title-fail";switch(l.code){case l.PERMISSION_DENIED:k.info.getGeolocationTitle="定位失败，请确认您开启位置服务";break;case l.POSITION_UNAVAILABLE:k.info.getGeolocationTitle="定位失败，请确认您开启位置服务";break;case l.TIMEOUT:k.info.getGeolocationTitle="定位超时，请您重试";break;case l.UNKNOWN_ERROR:k.info.getGeolocationTitle="定位出现未知错误，请您重试";break;default:k.info.getGeolocationTitle="定位失败，请您重试";}e.set("MMMETA_location_pos_ready",0);a.go("findshop");}function c(){if(navigator.geolocation){var l={timeout:10000};navigator.geolocation.getCurrentPosition(h,f,l);}else{k.info.showLocateImg=false;k.info.getGeolocationTitle="您的浏览器不支持定位！";e.set("MMMETA_location_pos_ready",0);a.go("findshop");}}k.$on("$ionicView.enter",function(){if(k.info.lastShop&&k.info.lastShop.id){a.go("productList");}else{b(function(){c();},1000);}});});